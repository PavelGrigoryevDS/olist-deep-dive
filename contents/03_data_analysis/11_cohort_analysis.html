
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Cohort Analysis &#8212; ðŸŒŠ Deep Sales Analysis of Olist Marketplace</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=aa5847ba" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/custom.js?v=f9582d1e"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contents/03_data_analysis/11_cohort_analysis';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Correlation Analysis" href="12_correlation_analysis.html" />
    <link rel="prev" title="Geographical Analysis" href="10_geographical_analysis.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo-light.png" class="logo__image only-light" alt="ðŸŒŠ Deep Sales Analysis of Olist Marketplace - Home"/>
    <script>document.write(`<img src="../../_static/logo-dark.png" class="logo__image only-dark" alt="ðŸŒŠ Deep Sales Analysis of Olist Marketplace - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    ðŸŒŠ Deep Sales Analysis of Olist
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Description and Exploration</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01_data_description_and_exploration/01_data_description.html">Data Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_data_description_and_exploration/02_data_loading.html">Data Loading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_data_description_and_exploration/03_data_exploration.html">Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_data_description_and_exploration/04_intermediate_conclusion.html">Intermediate Conclusion</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Preprocessing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/01_initial_data_filtering.html">Initial Data Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/02_outlier_handling.html">Outlier Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/03_missing_value_handling.html">Missing Value Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/04_duplicate_handling.html">Duplicate Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/05_creating_new_metrics.html">Creating New Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/06_creating_new_dimensions.html">Creating New Dimensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/07_converting_data_to_a_convenient_format.html">Converting Data to a Convenient Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/08_data_merging.html">Data Merging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_data_preprocessing/09_intermediate_conclusion.html">Intermediate Conclusion</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Analysis</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_creating_analysis_class.html">Creating Analysis Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_customer_analysis.html">Customer Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_seller_analysis.html">Seller Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_sales_analysis.html">Sales Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_product_analysis.html">Product Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_review_analysis.html">Review Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_delivery_analysis.html">Delivery Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_payment_analysis.html">Payment Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_geographical_analysis.html">Geographical Analysis</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Cohort Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_correlation_analysis.html">Correlation Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="13_slice_analysis.html">Slice Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_analysis_of_customer_segments.html">Analysis of Customer Segments</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_rfm_analysis.html">RFM Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_customer_clustering.html">Customer Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="17_hypothesis_testing.html">Hypothesis Testing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">General Conclusion</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/01_time_dynamics.html">Time Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/02_customers.html">Customers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/03_sales.html">Sales</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/04_products.html">Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/05_reviews.html">Reviews</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/06_delivery.html">Delivery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/07_payments.html">Payments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/08_sellers.html">Sellers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/09_cohort_analysis.html">Cohort Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/10_correlation_analysis.html">Correlation Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/11_black_friday.html">Black Friday</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/12_cancelled_orders.html">Cancelled Orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/13_hypothesis_testing_results.html">Hypothesis Testing Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_general_conclusion/14_detected_anomalies.html">Detected Anomalies</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Recommendations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/01_product_market_fit.html">Product market fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/02_customer_loyalty_enhancement.html">Customer loyalty Enhancement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/03_customer_experience_improvement.html">Customer Experience Improvement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/04_logistics_and_delivery_optimization.html">Logistics and Delivery Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/05_financial_optimization.html">Financial optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/06_average_order_value_and_basket_optimization.html">Average Order Value and Basket Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/07_segment_specific_strategies.html">Segment-Specific Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/08_product_and_assortment_management.html">Product and Assortment Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/09_marketing_and_promotion.html">Marketing and Promotion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/10_peak_season_preparedness.html">Peak Season Preparedness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/11_analytics_and_monitoring.html">Analytics and Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/12_ab_testing.html">A/B Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_recommendations/13_anomaly.html">Anomaly</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/PavelGrigoryevDS/olist-deep-dive" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/contents/03_data_analysis/11_cohort_analysis.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Cohort Analysis</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="cohort-analysis">
<h1>Cohort Analysis<a class="headerlink" href="#cohort-analysis" title="Link to this heading">#</a></h1>
<p>We will analyze different metrics by monthly cohorts.</p>
<p>We will choose a period of 30 days for lifetime, meaning each 30 days, the cohortâ€™s lifetime will increase by 1.</p>
<p><strong>Number of Sales</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;sales&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
<span class="p">)</span>
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/0bbb2f187602b21cbd31abd7811a563efe32a6c178daf641dc7d05db76823ee5.jpg" src="../../_images/0bbb2f187602b21cbd31abd7811a563efe32a6c178daf641dc7d05db76823ee5.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Most purchases occur in the cohortâ€™s first month</p></li>
<li><p>Stabilization after first month without sharp decline</p></li>
</ul>
<p><strong>Revenue</strong></p>
<p>Since Olist is a marketplace, it is reasonable to calculate revenue by the total amount of sold products. This is because the revenue for marketplaces typically comes from commissions on sellers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;revenue&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
    <span class="p">,</span> <span class="n">revenue_col</span><span class="o">=</span><span class="s1">&#39;total_products_price&#39;</span>
    <span class="p">,</span> <span class="n">text_auto</span><span class="o">=</span><span class="s1">&#39;.2s&#39;</span>
<span class="p">)</span>
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/289a13d1902763c339654a1223fa279e509ded05cf9202f5b96451b2109325ef.jpg" src="../../_images/289a13d1902763c339654a1223fa279e509ded05cf9202f5b96451b2109325ef.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Revenue follows similar pattern to sales volume</p></li>
<li><p>Majority of cohort revenue generated in first month</p></li>
<li><p>No sharp lifetime decline observed</p></li>
</ul>
<p><strong>Average Order Value</strong></p>
<p>For calculating the average order value, it is reasonable to take the total payment amount per order. This is because the average order value should reflect the total cost of the order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;aov&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
    <span class="p">,</span> <span class="n">revenue_col</span><span class="o">=</span><span class="s1">&#39;total_payment&#39;</span>
<span class="p">)</span>
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/3a68f860c94be4895dec934ab2a5c68485f9dcd5295548710b679c96bcf53e6f.jpg" src="../../_images/3a68f860c94be4895dec934ab2a5c68485f9dcd5295548710b679c96bcf53e6f.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>No post-first-month decline in average order value (relative metric)</p></li>
<li><p>No clear growth/decline trend across cohort lifetimes</p></li>
<li><p>Some peak values in isolated periods</p></li>
<li><p>Median AOV shows slight decline after 11 months</p></li>
<li><p>Anomalously high AOV:</p>
<ul>
<li><p>March 2017 cohort (month 5)</p></li>
<li><p>April 2017 cohort (month 15)</p></li>
</ul>
</li>
</ul>
<p><strong>Number of Buyers</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;buyers&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
<span class="p">)</span>
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/774876028eb502b69d75ca774f2ab413ccce5306954166679b689e6f32b1e3b7.jpg" src="../../_images/774876028eb502b69d75ca774f2ab413ccce5306954166679b689e6f32b1e3b7.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Customer count pattern mirrors revenue/sales</p></li>
<li><p>Nearly all customers donâ€™t return after first month</p></li>
</ul>
<p><strong>Retention</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;retention&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
    <span class="p">,</span> <span class="n">include_period0</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span> 
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/cb13ebb49d2c5b5a3faa59e52a2bf185b3963dc010abe34f117233b41d85a09e.jpg" src="../../_images/cb13ebb49d2c5b5a3faa59e52a2bf185b3963dc010abe34f117233b41d85a09e.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Extremely low 1st+ month retention</p></li>
<li><p>Olist shows very poor customer retention</p></li>
</ul>
<p>Letâ€™s look at the median retention of cohorts by periods.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;retention&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
    <span class="p">,</span> <span class="n">display_mode</span><span class="o">=</span><span class="s1">&#39;summary&#39;</span>
<span class="p">)</span>
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span> 
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/3a9ff7d288a3ee5e30ab9ce4dd002186dc6bbc4d3a62aaa896281273664f8ae4.jpg" src="../../_images/3a9ff7d288a3ee5e30ab9ce4dd002186dc6bbc4d3a62aaa896281273664f8ae4.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Clear pattern: minimal customers return for repeat purchases</p></li>
</ul>
<p><strong>Average Payment Count</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;apc&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
<span class="p">)</span> 
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span> 
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/58275b853b65cd3155c54c4742c1199ca9817cf45a9a643d375613b5d0db26fd.jpg" src="../../_images/58275b853b65cd3155c54c4742c1199ca9817cf45a9a643d375613b5d0db26fd.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Customers typically make 1-1.3 purchases per period</p></li>
</ul>
<p><strong>ARPPU</strong></p>
<p>For ARPPU, it is reasonable to take the total cost of products in the order, as we need the revenue per customer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;arppu&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
    <span class="p">,</span> <span class="n">revenue_col</span><span class="o">=</span><span class="s1">&#39;total_products_price&#39;</span>
<span class="p">)</span> 
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span> 
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4ec9b64dd25d1fa2eb1f6141f4e8b41fea972e7522f03bae80cd6a8302d63170.jpg" src="../../_images/4ec9b64dd25d1fa2eb1f6141f4e8b41fea972e7522f03bae80cd6a8302d63170.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Pattern similar to average order value</p></li>
<li><p>ARPPU resembles AOV since most customers make single purchases</p></li>
</ul>
<p><strong>LTV (Revenue-Based)</strong></p>
<p>Since we do not have data on expenses or the margin coefficient, we cannot calculate the actual LTV.</p>
<p>We will calculate LTV (Revenue-Based), assuming a margin coefficient of 1. This will serve as a proxy for LTV.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">df_sales</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">cohort</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;ltv&#39;</span>
    <span class="p">,</span> <span class="n">user_id_col</span><span class="o">=</span><span class="s1">&#39;customer_unique_id&#39;</span>
    <span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="s1">&#39;order_purchase_dt&#39;</span>
    <span class="p">,</span> <span class="n">order_id_col</span><span class="o">=</span><span class="s1">&#39;order_id&#39;</span>
    <span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span> 
<span class="n">pb</span><span class="o">.</span><span class="n">to_slide</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span> 
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4f4629ed28b1397872786d6b61a289869bf323183f22abff19e91b9704165ab2.jpg" src="../../_images/4f4629ed28b1397872786d6b61a289869bf323183f22abff19e91b9704165ab2.jpg" />
</div>
</div>
<p><strong>Key Observations:</strong></p>
<ul class="simple">
<li><p>Revenue-Based LTV remains stable across lifetime periods</p></li>
<li><p>Expected pattern since most purchases occur in first month</p></li>
<li><p>LTV reflects cumulative lifetime performance</p></li>
</ul>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="10_geographical_analysis.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Geographical Analysis</p>
      </div>
    </a>
    <a class="right-next"
       href="12_correlation_analysis.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Correlation Analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Pavel Grigoryev
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025, Pavel Grigoryev.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>